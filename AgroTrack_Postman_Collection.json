{
	"info": {
		"_postman_id": "agrotrack-collection-2024",
		"name": "AgroTrack API Collection",
		"description": "Colección completa de endpoints para el sistema AgroTrack - Gestión Agroindustrial (Actividad Obligatoria 2)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "agrotrack-exporter"
	},
	"item": [
		{
			"name": "API REST",
			"item": [
				{
					"name": "GET - Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"health"
							]
						},
						"description": "Endpoint de verificación que devuelve el estado del servidor en formato JSON"
					},
					"response": [
						{
							"name": "Health Check OK",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/health",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"health"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"ok\"\n}"
						}
					]
				},
				{
					"name": "GET - Listar Contactos",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/contactos",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"contactos"
							]
						},
						"description": "Obtiene todos los contactos almacenados en la base de datos MySQL. Retorna un array JSON con todos los contactos."
					},
					"response": [
						{
							"name": "Lista de Contactos",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/api/contactos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"api",
										"contactos"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"id\": 1,\n            \"nombre\": \"Juan Pérez\",\n            \"email\": \"juan@example.com\",\n            \"mensaje\": \"Consulta sobre productos\",\n            \"fecha\": \"2024-01-15T10:30:00.000Z\"\n        }\n    ],\n    \"count\": 1\n}"
						},
						{
							"name": "Lista Vacía",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/api/contactos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"api",
										"contactos"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [],\n    \"count\": 0\n}"
						}
					]
				},
				{
					"name": "POST - Crear Contacto (JSON)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Juan Pérez\",\n    \"email\": \"juan@example.com\",\n    \"mensaje\": \"Consulta sobre productos agroindustriales\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8888/api/contactos",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"contactos"
							]
						},
						"description": "Crea un nuevo contacto en la base de datos MySQL. Valida que todos los campos estén completos y que el email tenga formato válido. Retorna el contacto creado con código 201."
					},
					"response": [
						{
							"name": "Contacto Creado Exitosamente",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"nombre\": \"Juan Pérez\",\n    \"email\": \"juan@example.com\",\n    \"mensaje\": \"Consulta sobre productos agroindustriales\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8888/api/contactos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"api",
										"contactos"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Contacto creado exitosamente\",\n    \"data\": {\n        \"id\": 1,\n        \"nombre\": \"Juan Pérez\",\n        \"email\": \"juan@example.com\",\n        \"mensaje\": \"Consulta sobre productos agroindustriales\",\n        \"fecha\": \"2024-01-15T10:30:00.000Z\"\n    }\n}"
						}
					]
				},
				{
					"name": "POST - Crear Contacto (Form URL Encoded)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "nombre",
									"value": "María González",
									"description": "Nombre completo del contacto"
								},
								{
									"key": "email",
									"value": "maria@example.com",
									"description": "Correo electrónico válido del contacto"
								},
								{
									"key": "mensaje",
									"value": "Necesito información sobre sistemas de riego",
									"description": "Mensaje o consulta del contacto"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/contactos",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"contactos"
							]
						},
						"description": "Crea un nuevo contacto usando form-urlencoded. También acepta este formato además de JSON."
					},
					"response": []
				},
				{
					"name": "POST - Crear Contacto (Error Validación)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"\",\n    \"email\": \"email-invalido\",\n    \"mensaje\": \"\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8888/api/contactos",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"contactos"
							]
						},
						"description": "Ejemplo de error de validación cuando los datos enviados no cumplen con los requisitos. Retorna código 400 con mensajes descriptivos."
					},
					"response": [
						{
							"name": "Error de Validación",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"nombre\": \"\",\n    \"email\": \"email-invalido\",\n    \"mensaje\": \"\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8888/api/contactos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"api",
										"contactos"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": false,\n    \"error\": \"Error de validación\",\n    \"errors\": [\n        \"El nombre es requerido\",\n        \"El email no tiene un formato válido\",\n        \"El mensaje es requerido\"\n    ]\n}"
						}
					]
				}
			],
			"description": "Endpoints de la API REST para gestión de contactos. Todos los endpoints retornan JSON."
		},
		{
			"name": "Páginas Principales",
			"item": [
				{
					"name": "GET - Página Principal",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								""
							]
						},
						"description": "Obtiene la página principal de AgroTrack con información general del sistema"
					},
					"response": []
				},
				{
					"name": "GET - Productos",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/productos.html",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"productos.html"
							]
						},
						"description": "Muestra la página de productos y servicios agroindustriales"
					},
					"response": []
				},
				{
					"name": "GET - Contacto",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/contacto.html",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"contacto.html"
							]
						},
						"description": "Muestra el formulario de contacto y información de la empresa"
					},
					"response": []
				},
				{
					"name": "GET - Login",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/login.html",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"login.html"
							]
						},
						"description": "Muestra el formulario de acceso al sistema"
					},
					"response": []
				},
				{
					"name": "GET - Estilos CSS",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/estilos.css",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"estilos.css"
							]
						},
						"description": "Obtiene el archivo de estilos CSS del sistema"
					},
					"response": []
				}
			],
			"description": "Endpoints para obtener las páginas principales del sistema"
		},
		{
			"name": "Autenticación",
			"item": [
				{
					"name": "POST - Procesar Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "usuario",
									"value": "Juan",
									"description": "Nombre de usuario para el login"
								},
								{
									"key": "clave",
									"value": "1234",
									"description": "Clave de acceso del usuario"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/auth/recuperar",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"auth",
								"recuperar"
							]
						},
						"description": "Procesa los datos de login y los muestra en una página de respuesta. Sistema de demostración que muestra las credenciales ingresadas."
					},
					"response": [
						{
							"name": "Login Exitoso",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "usuario",
											"value": "Juan"
										},
										{
											"key": "clave",
											"value": "1234"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8888/auth/recuperar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"auth",
										"recuperar"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "html",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/html; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Datos Recibidos</title>\n    <link rel=\"stylesheet\" href=\"/estilos.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h2>Datos recibidos</h2>\n        <div class=\"data-display\">\n            <p><strong>Usuario:</strong> Juan</p>\n            <p><strong>Clave:</strong> 1234</p>\n        </div>\n        <a href=\"/\" class=\"btn\">Volver al inicio</a>\n    </div>\n</body>\n</html>"
						}
					]
				}
			],
			"description": "Endpoints relacionados con la autenticación y acceso al sistema"
		},
		{
			"name": "Gestión de Contacto",
			"item": [
				{
					"name": "POST - Enviar Consulta de Contacto",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "nombre",
									"value": "Juan Pérez",
									"description": "Nombre completo del contacto"
								},
								{
									"key": "email",
									"value": "jperez@mail.com",
									"description": "Correo electrónico del contacto"
								},
								{
									"key": "mensaje",
									"value": "Quisiera información sobre los servicios de monitoreo de cultivos para mi finca de 50 hectáreas.",
									"description": "Mensaje o consulta del contacto"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/contacto/cargar",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"contacto",
								"cargar"
							]
						},
						"description": "Envía una consulta de contacto que se guarda en la base de datos MySQL y devuelve una página de confirmación HTML"
					},
					"response": [
						{
							"name": "Consulta Enviada Exitosamente",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "nombre",
											"value": "Juan Pérez"
										},
										{
											"key": "email",
											"value": "jperez@mail.com"
										},
										{
											"key": "mensaje",
											"value": "Quisiera información sobre los servicios de monitoreo de cultivos para mi finca de 50 hectáreas."
										}
									]
								},
								"url": {
									"raw": "http://localhost:8888/contacto/cargar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"contacto",
										"cargar"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "html",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/html; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Consulta Enviada</title>\n    <link rel=\"stylesheet\" href=\"/estilos.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h2>¡Gracias por tu consulta!</h2>\n        <p>Hemos recibido tu mensaje y te responderemos pronto.</p>\n        <div class=\"success-message\">\n            <p><strong>Nombre:</strong> Juan Pérez</p>\n            <p><strong>Email:</strong> jperez@mail.com</p>\n            <p><strong>Mensaje:</strong> Quisiera información sobre los servicios de monitoreo de cultivos para mi finca de 50 hectáreas.</p>\n        </div>\n        <a href=\"/\" class=\"btn\">Volver al inicio</a>\n        <a href=\"/contacto/listar\" class=\"btn btn-secondary\">Ver todas las consultas</a>\n    </div>\n</body>\n</html>"
						}
					]
				},
				{
					"name": "GET - Listar Consultas",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/contacto/listar",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"contacto",
								"listar"
							]
						},
						"description": "Muestra todas las consultas de contacto guardadas en la base de datos MySQL en formato HTML"
					},
					"response": [
						{
							"name": "Lista de Consultas",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/contacto/listar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"contacto",
										"listar"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "html",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/html; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Consultas Recibidas</title>\n    <link rel=\"stylesheet\" href=\"/estilos.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h2>Consultas Recibidas</h2>\n        <div class=\"consultas-container\">\n            <pre>-------------------------\nFecha: 2024-01-15 14:30:25\nNombre: Juan Pérez\nEmail: jperez@mail.com\nMensaje: Quisiera información sobre los servicios de monitoreo de cultivos para mi finca de 50 hectáreas.\n-------------------------\n\n-------------------------\nFecha: 2024-01-15 15:45:12\nNombre: María González\nEmail: maria.gonzalez@empresa.com\nMensaje: Necesito cotización para sistema de riego automático en 100 hectáreas de soja.\n-------------------------\n\n</pre>\n        </div>\n        <a href=\"/\" class=\"btn\">Volver al inicio</a>\n        <a href=\"/contacto.html\" class=\"btn btn-secondary\">Nueva consulta</a>\n    </div>\n</body>\n</html>"
						},
						{
							"name": "Sin Consultas",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/contacto/listar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"contacto",
										"listar"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "html",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/html; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Consultas Recibidas</title>\n    <link rel=\"stylesheet\" href=\"/estilos.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h2>Consultas Recibidas</h2>\n        <p class=\"no-data\">Aún no hay consultas</p>\n        <a href=\"/\" class=\"btn\">Volver al inicio</a>\n        <a href=\"/contacto.html\" class=\"btn btn-secondary\">Nueva consulta</a>\n    </div>\n</body>\n</html>"
						}
					]
				}
			],
			"description": "Endpoints para gestionar consultas de contacto y comunicación con clientes (versión HTML)"
		},
		{
			"name": "Casos de Error",
			"item": [
				{
					"name": "GET - Ruta No Encontrada (404)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/ruta-inexistente",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"ruta-inexistente"
							]
						},
						"description": "Ejemplo de respuesta 404 cuando se accede a una ruta que no existe"
					},
					"response": [
						{
							"name": "Error 404",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:8888/ruta-inexistente",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8888",
									"path": [
										"ruta-inexistente"
									]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "html",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/html; charset=utf-8"
								}
							],
							"cookie": [],
							"body": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Página no encontrada</title>\n    <link rel=\"stylesheet\" href=\"/estilos.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h1>404 - Página no encontrada</h1>\n        <p>La página que buscas no existe.</p>\n        <a href=\"/\" class=\"btn\">Volver al inicio</a>\n    </div>\n</body>\n</html>"
						}
					]
				}
			],
			"description": "Ejemplos de respuestas de error del sistema"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script de pre-request para la colección AgroTrack",
					"console.log('Ejecutando request para AgroTrack...');",
					"",
					"// Verificar que el servidor esté ejecutándose",
					"if (!pm.environment.get('server_url')) {",
					"    pm.environment.set('server_url', 'http://localhost:8888');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Tests básicos para la colección AgroTrack",
					"",
					"// Test para endpoints de API REST (JSON)",
					"if (pm.request.url.toString().includes('/api/') || pm.request.url.toString().includes('/health')) {",
					"    pm.test('Status code is 200 or 201', function () {",
					"        pm.expect(pm.response.code).to.be.oneOf([200, 201, 400]);",
					"    });",
					"    ",
					"    pm.test('Content-Type is JSON', function () {",
					"        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"    });",
					"    ",
					"    pm.test('Response has valid JSON', function () {",
					"        pm.response.to.be.json;",
					"    });",
					"} else {",
					"    // Tests para endpoints HTML",
					"    pm.test('Status code is 200', function () {",
					"        pm.response.to.have.status(200);",
					"    });",
					"    ",
					"    pm.test('Content-Type includes text/html', function () {",
					"        pm.expect(pm.response.headers.get('Content-Type')).to.include('text/html');",
					"    });",
					"}",
					"",
					"pm.test('Response time is less than 1000ms', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(1000);",
					"});",
					"",
					"// Log de información útil",
					"console.log('Response Status:', pm.response.status);",
					"console.log('Response Time:', pm.response.responseTime + 'ms');",
					"console.log('Content-Type:', pm.response.headers.get('Content-Type'));"
				]
			}
		}
	],
	"variable": [
		{
			"key": "server_url",
			"value": "http://localhost:8888",
			"type": "string"
		},
		{
			"key": "api_version",
			"value": "2.0",
			"type": "string"
		}
	]
}
